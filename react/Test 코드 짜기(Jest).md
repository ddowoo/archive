# í…ŒìŠ¤íŠ¸ ì½”ë“œ ì§œê¸°(JEST)

## **í…ŒìŠ¤íŠ¸ ì½”ë“œ ì¢…ë¥˜?**

- **ìœ ë‹› í…ŒìŠ¤íŠ¸**
  ìœ ë‹› í…ŒìŠ¤íŠ¸ëŠ” í•¨ìˆ˜, ë©”ì†Œë“œ ë˜ëŠ” í´ë˜ìŠ¤ì™€ ê°™ì€ ì‘ì€ ë‹¨ìœ„ë¥¼ í…ŒìŠ¤íŠ¸í•œë‹¤.
- **í†µí•© í…ŒìŠ¤íŠ¸**
  ì—¬ëŸ¬ ê°œì˜ ìœ ë‹› ë˜ëŠ” ì»´í¬ë„ŒíŠ¸ë¥¼ í•¨ê»˜ ì‘ë™í•˜ëŠ” ë°©ì‹ì„ í…ŒìŠ¤íŠ¸í•œë‹¤.
- **e2eÂ í…ŒìŠ¤íŠ¸**
  ì „ì²´ì ì¸ ì‘ë™ì„ í…ŒìŠ¤íŠ¸í•˜ëŠ” ê²ƒìœ¼ë¡œ, ì‚¬ìš©ìì˜ ê´€ì ì—ì„œ ì‹œë‚˜ë¦¬ì˜¤ë¥¼ ì¬í˜„í•˜ì—¬ í…ŒìŠ¤íŠ¸í•œë‹¤.

ìœ„ì™€ ê°™ì€ í…ŒìŠ¤íŠ¸ ì¢…ë¥˜ ì¤‘ JESTëŠ” ìœ ë‹› í…ŒìŠ¤íŠ¸ì™€ í†µí•© í…ŒìŠ¤íŠ¸ë¥¼ ìœ„í•´ ì‚¬ìš©ëœë‹¤.

ê·¸ë¦¬ê³  React í™˜ê²½ì—ì„œ ì´ë£¨ì–´ ì§€ê¸° ë•Œë¬¸ì— Jestì™€ í•¨ê»˜ **[React Testing Library](https://testing-library.com/react)**ë¥¼ í•¨ê»˜ ì‚¬ìš©í•´ í…ŒìŠ¤íŠ¸ ì½”ë“œë¥¼ ì§ ë‹¤.

---

## JEST?

JestëŠ” í˜ì´ìŠ¤ë¶ì—ì„œ ë§Œë“  ìë°”ìŠ¤í¬ë¦½íŠ¸ í…ŒìŠ¤íŒ… í”„ë ˆì„ì›Œí¬ì´ë‹¤.Â  Reactì˜ í…ŒìŠ¤íŠ¸ë¥¼ ìœ„í•´ ì“¸ìˆ˜ ìˆì§€ë§Œ ì´ì™¸ì˜ ë‹¤ì–‘í•œ í™˜ê²½ì—ì„œë„ ì“¸ ìˆ˜ ìˆë‹¤.(ë°”ë²¨, íƒ€ì…ìŠ¤í¬ë¦½íŠ¸, ë…¸íŠ¸, ë¦¬ì•¡íŠ¸ ë“±)Â ë˜í•œ ë¼ì´ë¸ŒëŸ¬ë¦¬ë¥¼ ì„¤ì¹˜í•˜ë©´ ë³„ë„ì˜ ì„¤ì • ì—†ì´ ë°”ë¡œ ì“¸ìˆ˜ ìˆë‹¤.(í•„ìš”í•œ ê²½ìš°ë„ ì¡´ì¬)

ë¸Œë¼ìš°ì €ê°€ ì•„ë‹Œ CLIí™˜ê²½ì—ì„œ í…ŒìŠ¤íŠ¸ ì½”ë“œë¥¼ ì‹¤í–‰ ì‹œí‚¤ëŠ” íŠ¹ì§•ì´ë‹¤.

---

## í…ŒìŠ¤íŠ¸í•  í”„ë¡œì íŠ¸

CRAë¡œ í”„ë¡œì íŠ¸ë¥¼ ë§Œë“¤ë©´ ë³„ë„ì˜ ì„¤ì¹˜ ì—†ì´ **Jestì™€ React Testing Libaryê°€ ì…‹íŒ…**ì´ ë˜ì–´ìˆê¸° ë•Œë¬¸ì— ë°”ë¡œ í…ŒìŠ¤íŠ¸ ì½”ë“œë¥¼ ì‹¤í–‰í•  ìˆ˜ ìˆì–´ CRAë¡œ í”„ë¡œì íŠ¸ë¥´ ë§Œë“¤ì—ˆë‹¤.

(í€´ì¦ˆë¥¼ ê°¯ìˆ˜ì™€ ë‚œì´ë„ë¥¼ ì„ íƒí•˜ë©´ í€´ì¦ˆ ì‹œì‘ ë²„íŠ¼ì´ í™œì„±í™”ê°€ ë˜ê³  í€´ì¦ˆë¥¼ í’€ìˆ˜ ìˆë‹¤.)

---

## JEST, **@testing-library/react** API

ê° ë¼ì´ë¸ŒëŸ¬ë¦¬ì—ì„œ ë‹¤ì–‘í•œ APIë¥¼ ì œê³µí•˜ì§€ë§Œ ê·¸ì¤‘ ì˜¤ëŠ˜ í…ŒìŠ¤íŠ¸ì—ì„œ ì‚¬ìš©í•˜ëŠ” APIì— ëŒ€í•´ ì •ë¦¬í•˜ë©´ ì•„ë˜ì™€ ê°™ë‹¤

### **JEST**

**`test(name, fn, timeout)` , `it(name, fn, timeout)`**

- í…ŒìŠ¤íŠ¸ ì½”ë“œë¥¼ ì‹¤í–‰í•˜ëŠ” í•¨ìˆ˜

```tsx
it('ê¸°ëŠ¥1 í…ŒìŠ¤íŠ¸', () => {});
test('ê¸°ëŠ¥2 í…ŒìŠ¤íŠ¸', () => {});
```

**`describe(name, fn)`**

- ì—¬ëŸ¬ í…ŒìŠ¤íŠ¸ë¥¼ ê·¸ë£¹í™” í•˜ëŠ”ë° ì‚¬ìš©. í•„ìˆ˜ëŠ” ì•„ë‹ˆì§€ë§Œ í…ŒìŠ¤íŠ¸ë¥¼ ê·¸ë£¹í™” í•˜ëŠ”ë° ìœ ìš©

```tsx
describe('ì»´í¬ë„ŒíŠ¸ í…ŒìŠ¤íŠ¸', () => {
  it('ê¸°ëŠ¥1 í…ŒìŠ¤íŠ¸', () => {});

  test('ê¸°ëŠ¥2 í…ŒìŠ¤íŠ¸', () => {});
});
```

**`beforeEach(name, fn)`**

- ê° í…ŒìŠ¤íŠ¸ê°€ ì‹¤í–‰ë˜ê¸° ì „ì— í•¨ìˆ˜ë¥¼ ì‹¤í–‰

```tsx
beforeEach(() => {
  // í…ŒìŠ¤íŠ¸ ì „ ì‹¤í–‰ ì½”ë“œ ì‘ì„±
});
```

<aside>
ğŸ’¡ [JEST API  ì•Œì•„ë³´ê¸°](https://jestjs.io/docs/api)

</aside>

<aside>
ğŸ’¡ [JEST API  ì•Œì•„ë³´ê¸°](https://jestjs.io/docs/api)

</aside>

### **@testing-library/react**

`**render**`

- ì»´í¬ë„ŒíŠ¸ë¥¼ í™”ë©´ì— ê·¸ë¦¬ëŠ” ì‘ì—…ì„ í•´ì¤€ë‹¤.

```tsx
render(<App />);
```

`**screen**`

- ë¸Œë¼ìš°ì €ì˜ `document.body` ì™€ ê°™ì€ ì—­í• ë¡œ ë Œë”ë§ëœ ë…¸ë“œì— ì ‘ê·¼í•  ìˆ˜ ìˆë‹¤.

```tsx
import { render, screen } from '@testing-library/react';

render(
  <div>
    <label htmlFor="example">Example</label>
    <input id="example" />
  </div>
);

const exampleInput = screen.getByLabelText('Example');
```

**`fireEvent(node: HTMLElement, event: Event)`**

- ì‚¬ìš©ì interactionì„ ë°œìƒì‹œí‚¨ë‹¤. (ë¸Œë¼ìš°ì €ì—ì„œ ì‹¤í–‰ë˜ëŠ” ì‚¬ìš©ì interactionê³¼ ì •í™•íˆ ì¼ì¹˜í•˜ì§€ ì•ŠëŠ”ë‹¤, `**userEvent**` ë¥¼ í™œìš©í•˜ë©´ ì‚¬ìš©ì í–‰ë™ê³¼ ìœ ì‚¬í•˜ê²Œ ì‘ë™í•œë‹¤.)

```tsx
fireEvent.click(screen.getByText('Load'));
```

<aside>
ğŸ’¡ **[@testing-library/react API ì•Œì•„ë³´ê¸°](https://testing-library.com/docs/react-testing-library/api)**

</aside>

---

## í…ŒìŠ¤íŠ¸ ì‘ì„±

í…ŒìŠ¤íŠ¸ ì½”ë“œë¥¼ ì§¤ë•ŒëŠ” ë‹¤ìŒì˜ ê·œì¹™ì„ ë”°ë¼ì„œ ì‘ì—…í–ˆë‹¤.

1. **Given**Â - ì‚¬ì „ ì¡°ê±´, ìƒí™©
2. **When**Â - ìœ ì €ì˜ í´ë¦­, ì…ë ¥ê³¼ ê°™ì€ ì´ë²¤íŠ¸ ë“± ë¬´ì–¸ê°€ê°€ ì‹¤í–‰ë¨
3. **Then**Â - ê·¸ë¡œì¸í•´ ë‹¤ìŒê³¼ ê°™ì€ ê²°ê³¼ê°€ ê¸°ëŒ€ë¨

íšŒì‚¬ë§ˆë‹¤ ì €ë§ˆë‹¤ì˜ ê·œì¹™ì„ ê°€ì§€ê³  ìˆëŠ”ê²ƒ ê°™ì€ ê³³ë„ ìˆì—ˆì§€ë§Œ ì²˜ìŒì—ëŠ” ìœ„ì™€ ê°™ì€ ê·œì¹™ìœ¼ë¡œ ì§œê¸¸ ê¶Œí–ˆë‹¤.

(ë˜í•œ ìœ„ ë°©ì‹ì€ AAA (Arrange, Act, Assert)ë¡œ ë¶ˆë¦¬ê¸°ë„ í•œë‹¤.)

### ì²«ë²ˆì§¸ í…ŒìŠ¤íŠ¸

### Given

**í€´ì¦ˆ ì„ íƒ ì»´í¬ë„ŒíŠ¸ ë Œë”ë§**

ìš°ì„  í…ŒìŠ¤íŠ¸í•  í™˜ê²½ì„ ë™ì¼í•˜ê²Œ ë§Œë“¤ì–´ ì£¼ê¸° ìœ„í•´ í…ŒìŠ¤íŠ¸í•  Homeì»´í¬ë„ŒíŠ¸ê°€ ë Œë”ë§ ë˜ëŠ” ë™ì¼í•œ í™˜ê²½(Reocil, React-Query)ì„ ë§Œë“¤ê³  í™”ë©´ì„ ê·¸ë ¸ë‹¤.

```tsx
import { createMemoryRouter } from "react-router-dom";
import { render, fireEvent } from "@testing-library/react";
...
descrbie('í™ˆ ì»´í¬ë„ŒíŠ¸ í…ŒìŠ¤íŠ¸',()=>{
		it('í€´ì¦ˆ ì¡°ê±´ ì„ íƒ í›„ í€´ì¦ˆ ì‹œì‘ë²„íŠ¼ í™œì„±í™”', ()=>{
				const routes = [
				  {
				    path: "",
				    element: <Home />,
				  },
				];

				// **createMemoryRouter**
				const router = createMemoryRouter(routes, {
				  initialEntries: ["/"],
				  initialIndex: 0,
				});

				render(
				  <QueryClientProvider client={queryClient}>
				      <PageLayout>
				        <RouterProvider router={router} />
				      </PageLayout>
				  </QueryClientProvider>
				);
		})

})
```

<aside>
ğŸ’¡ **createMemoryRouter**
JestëŠ” ë¸Œë¼ìš°ì €ê°€ ì•„ë‹Œ CLI í™˜ê²½ì—ì„œ í…ŒìŠ¤íŠ¸ ì½”ë“œê°€ ì‹¤í–‰ë©ë‹ˆë‹¤. ì´ ë•Œ, ë¸Œë¼ìš°ì €ì—ì„œì™€ ë§ˆì°¬ê°€ì§€ë¡œ ë©”ëª¨ë¦¬ì—ì„œ ë¼ìš°íŒ… ìŠ¤íƒì„ ê´€ë¦¬í•˜ê³ , ì´ë²¤íŠ¸ë¡œ ì¸í•´ ê²½ë¡œê°€ ë³€ê²½ë˜ëŠ” ìƒí™©ì„ ì‹œë®¬ë ˆì´ì…˜í•˜ì—¬ í•´ë‹¹ ê²½ë¡œë¡œ ì»´í¬ë„ŒíŠ¸ê°€ ì œëŒ€ë¡œ ë Œë”ë§ë˜ì—ˆëŠ”ì§€ë¥¼ ì²´í¬í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤. ì´ë¥¼ ê°€ëŠ¥í•˜ê²Œ í•˜ëŠ” ê²ƒì´ **`createMemoryRouter`**ì™€ ê°™ì€ ë©”ëª¨ë¦¬ ë¼ìš°í„°ì…ë‹ˆë‹¤. ì´ë¥¼ í†µí•´ Jest í™˜ê²½ì—ì„œë„ ì‹¤ì œ ë¸Œë¼ìš°ì €ì—ì„œì˜ ë™ì‘ê³¼ ìœ ì‚¬í•œ ë°©ì‹ìœ¼ë¡œ ë¼ìš°íŒ… ë¡œì§ì„ í…ŒìŠ¤íŠ¸í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤

</aside>

### When

**í€´ì¦ˆ ê°¯ìˆ˜, ë‚œì´ë„ ì„ íƒ**

ê°¯ìˆ˜ì™€ ë ˆë²¨ì„ ì„ íƒí•˜ëŠ” ë²„íŠ¼ ë…¸ë“œì— ì ‘ê·¼í•´ fireEvent APIë¥¼ í™œìš©í•´ í•´ë‹¹ ë…¸ë“œë“¤ì„ í´ë¦­í•˜ëŠ” ì´ë²¤íŠ¸ë¥¼ ì‹¤í–‰ì‹œí‚¨ë‹¤.

```tsx
import { render, fireEvent, screen } from "@testing-library/react";

...
const countRadioBtn = screen.getByLabelText("5ê°œ");
const levelRadioBtn = screen.getByLabelText("medium");

fireEvent.click(countRadioBtn);
fireEvent.click(levelRadioBtn);
...
```

<aside>
ğŸ’¡ **ë…¸ë“œ ì ‘ê·¼ ë°©ì‹**

- **getBy...**: ì¼ì¹˜í•˜ëŠ” ì²« ë²ˆì§¸ ë…¸ë“œë¥¼ ë°˜í™˜í•˜ë©°, ì¼ì¹˜í•˜ëŠ” ìš”ì†Œê°€ ì—†ê±°ë‚˜ ë‘˜ ì´ìƒì´ë©´ ì˜¤ë¥˜ ë°œìƒ(ì´ ê²½ìš°getAllBy)
- **queryBy...**: ì¼ì¹˜í•˜ëŠ” ì²« ë²ˆì§¸ ë…¸ë“œë¥¼ ë°˜í™˜í•˜ë©°, ì¼ì¹˜í•˜ëŠ” ìš”ì†Œê°€ ì—†ìœ¼ë©´ nullì„ ë°˜í™˜. ë‘˜ ì´ìƒ ì¼ì¹˜í•˜ë©´ ì—ëŸ¬(ì´ ê²½ìš° queryAllBy)
- **findBy...**: ì¼ì¹˜í•˜ëŠ” ìš”ì†Œë¥¼ Promiseë¡œ ë°˜í™˜í•˜ë©°, ì‹œê°„ ë‚´ì— ë°œê²¬í•˜ì§€ ëª»í•˜ë©´ í…ŒìŠ¤íŠ¸ ì‹¤íŒ¨í•©ë‹ˆë‹¤.
</aside>

### Then

**í€´ì¦ˆ í’€ê¸° ë²„íŠ¼ í™œì„±í™”**

í€´ì¦ˆ ë²„íŠ¼ ë…¸ë“œë¥¼ ì ‘ê·¼í•´ disabledí”„ë¡œí¼í‹°ì˜ ê°’ì´ falseì¸ì§€ ì²´í¬

```tsx
...
const quizBtn = screen.getByText("í€´ì¦ˆí’€ê¸°");
expect(quizBtn).toHaveProperty("disabled", false);
...
```

---

### `BeforeEach`

ìœ„ì˜ í…ŒìŠ¤íŠ¸ì— ì´ì–´ì„œ í€´ì¦ˆí’€ê¸°ë¥¼ ëˆ„ë¥´ë©´ ìƒˆë¡œìš´ í˜ì´ì§€ë¡œ ì˜ ì´ë™í•˜ëŠ”ì§€ ì²´í¬í•˜ëŠ” í…ŒìŠ¤íŠ¸ë¥¼ ì¶”ê°€í–ˆë‹¤.

ë³´ë©´ routesë¥¼ ìƒì„±í•˜ê³  renderí•˜ëŠ” ë¶€ë¶„ì—ì„œ ìœ„ì— í…ŒìŠ¤íŠ¸ì™€ ì½”ë“œê°€ ê²¹ì¹œë‹¤. ì´ë ‡ê²Œ **ê° í…ŒìŠ¤íŠ¸ ë§ˆë‹¤ ë°˜ë³µë˜ëŠ” ì½”ë“œëŠ”** **`beforeEach`** ë¥¼ í™œìš©í•˜ë©´ í•´ë‹¹ ì½”ë“œë¥¼ ë°˜ë³µí•´ ì“¸ í•„ìš”ê°€ ì—†ë‹¤.

- **ìˆ˜ì •ì „**

```tsx
it('í€´ì¦ˆ í’€ê¸° í´ë¦­ ì‹œ Quizë¡œ ì´ë™', () => {
  // Given : í€´ì¦ˆ ì»´í¬ë„ŒíŠ¸ ë Œë”ë§
  const routes = [
    {
      path: '',
      element: <Home />,
    },
    {
      path: '/quiz',
      element: <Quiz />,
    },
  ];

  const router = createMemoryRouter(routes, {
    initialEntries: ['/'],
    initialIndex: 0,
  });
  render(
    <QueryClientProvider client={queryClient}>
      <PageLayout>
        <RouterProvider router={router} />
      </PageLayout>
    </QueryClientProvider>
  );

  //When,Act - í€´ì¦ˆí’€ê¸° ë²„íŠ¼ì„ ëˆŒëŸ¬ í€´ì¦ˆ í˜ì´ì§€ë¡œ ë„˜ì–´ê°€ê¸°
  const countRadioBtn = screen.getByLabelText('5ê°œ');
  const levelRadioBtn = screen.getByLabelText('medium');
  const quizBtn = screen.getByText('í€´ì¦ˆí’€ê¸°');

  fireEvent.click(countRadioBtn);
  fireEvent.click(levelRadioBtn);
  fireEvent.click(quizBtn);

  //Then,Asser - í€´ì¦ˆí˜ì´ì§€
  expect(screen.getByText('ì œì¶œí•˜ê¸°')).toBeInTheDocument();
});
```

**ìˆ˜ì •í•œ ì½”ë“œ**

- **beforeEach**

```tsx

describe("í™ˆ ì»´í¬ë„ŒíŠ¸ í…ŒìŠ¤íŠ¸", () => {
  beforeEach(() => {
    // Given : í€´ì¦ˆ ì¡°ê±´ ì„ íƒ í™”ë©´ ë Œë”ë§
    const routes = [
      {
        path: "",
        element: <Home />,
      },
      {
        path: "/quiz",
        element: <Quiz />,
      },
    ];

    const router = createMemoryRouter(routes, {
      initialEntries: ["/"],
      initialIndex: 0,
    });
    render(
      <QueryClientProvider client={queryClient}>
        <PageLayout>
          <RouterProvider router={router} />
        </PageLayout>
      </QueryClientProvider>
    );
  });
	...
});

```

- **ìˆ˜ì •ëœ í…ŒìŠ¤íŠ¸ ì½”ë“œ**

```tsx

describe("í™ˆ ì»´í¬ë„ŒíŠ¸ í…ŒìŠ¤íŠ¸", () => {
	...
  it("í€´ì¦ˆ ì¡°ê±´ ì„ íƒ í›„ í€´ì¦ˆ ì‹œì‘ë²„íŠ¼ í™œì„±í™”", () => {
    //When,Act - í€´ì¦ˆ ê°¯ìˆ˜ì™€ ë‚œì´ë„ ì„¤ì •
    const countRadioBtn = screen.getByLabelText("5ê°œ");
    const levelRadioBtn = screen.getByLabelText("medium");

    fireEvent.click(countRadioBtn);
    fireEvent.click(levelRadioBtn);

    //Then,Asser - í€´ì¦ˆ í’€ê¸° ë²„íŠ¼ì´ í™œì„±í™”
    const quizBtn = screen.getByText("í€´ì¦ˆí’€ê¸°");
    expect(quizBtn).toHaveProperty("disabled", false);
  });

  it("í€´ì¦ˆ í’€ê¸° í´ë¦­ ì‹œ Quizë¡œ ì´ë™", () => {
    //When,Act - í€´ì¦ˆí’€ê¸° ë²„íŠ¼ì„ ëˆŒëŸ¬ í€´ì¦ˆ í˜ì´ì§€ë¡œ ë„˜ì–´ê°€ê¸°
    const countRadioBtn = screen.getByLabelText("5ê°œ");
    const levelRadioBtn = screen.getByLabelText("medium");
    const quizBtn = screen.getByText("í€´ì¦ˆí’€ê¸°");

    fireEvent.click(countRadioBtn);
    fireEvent.click(levelRadioBtn);
    fireEvent.click(quizBtn);

    //Then,Asser - í€´ì¦ˆí˜ì´ì§€
    //í™ˆ ì»´í¬ë„ŒíŠ¸ ì»´í¬ë„ŒíŠ¸ ë‚´ ë²„íŠ¼ì´ ìˆëŠ”ì§€ ì²´í¬
    expect(screen.getByText("ì œì¶œí•˜ê¸°")).toBeInTheDocument();
  });
});

```

---

### React-Query + Nock

react-queryë¥¼ í™œìš©í•´ ì„œë²„ìƒíƒœê°’ì„ ê´€ë¦¬í•˜ê³  ì´ë¥¼ í…ŒìŠ¤íŠ¸ í•˜ë ¤ë©´

**`@testing-library/react`**ì˜ **`renderHook` ,`waitFor`**ì„ ì‚¬ìš©í•œë‹¤.

- query hook

```tsx
export const useQuiz = (count: QuizCount, level: QuizLevel) => {
  return useQuery(['quiz'], () => getQuestionListFetch(count, level), {
    // staleTime: Infinity,
    // suspense: true,
    // useErrorBoundary: true,
  });
};
```

<aside>
ğŸ’¡ suspenseë¥¼ ì‚¬ìš©í•˜ë©´ testì—ì„œ ì—ëŸ¬ê°€ ìƒê²¨ì„œ í…ŒìŠ¤íŠ¸ì‹œ ìš°ì„  ë„ê³  ì‹¤í–‰í–ˆìŠµë‹ˆë‹¤.

</aside>

- test code (React v 18>)

```tsx
describe('í™ˆ ì»´í¬ë„ŒíŠ¸ í…ŒìŠ¤íŠ¸', () => {
  it('react query useQuiz í…ŒìŠ¤íŠ¸', async () => {
    const { result } = renderHook(() => useQuiz(10, 'medium'), { wrapper });
    await waitFor(() => expect(result.current.isSuccess).toBe(true));
    expect(result.current.data?.length).toBe(10);
  });
});
```

ìœ„ì™€ ê°™ì´ useQuizë¥¼ ë Œë”ë§ ì‹œí‚¤ê³  waitForë¡œ useQueryì˜ isSuccessê°€ trueì´ê¸¸ ê¸°ë‹¤ë ¸ë‹¤. ê·¸ë¦¬ê³  ë°›ì•„ì˜¨ ë°ì´í„°ì˜ ê¸¸ì´(í€´ì¦ˆ ìˆ˜)ê°€ 10ê°œê°€ ë§ëŠ”ì§€ ì²´í¬í–ˆë‹¤.

React-Queryë¥¼ ì‚¬ìš©í•˜ëŠ” ê°€ì¥ í° ì´ìœ ëŠ” ë„¤íŠ¸ì›Œí¬ ìš”ì²­ì„ ìºì‹œí•˜ëŠ” ê²ƒì´ê¸° ë•Œë¬¸ì— ë°ì´í„°ê°€ ì˜ ìºì‹œê°€ ë˜ì–´ìˆëŠ”ì§€ ì²´í¬í•´ì•¼ í•˜ëŠ”ë° ì´ë¥¼ êµ¬í˜„í• ë•ŒëŠ” **Nock**ë¥¼ í™œìš©í•œë‹¤.

---

### Routes í…ŒìŠ¤íŠ¸

ìœ„ í…ŒìŠ¤íŠ¸ ì½”ë“œì—ì„œëŠ” í™”ë©´ì´ ì˜ ë„˜ì–´ê°”ëŠ”ì§€ë¥¼ í…ŒìŠ¤íŠ¸ í•  ë•Œ í•´ë‹¹ í™”ë©´ì„ íŠ¹ì •í•  ìˆ˜ ìˆëŠ” ì»´í¬ë„ŒíŠ¸ì˜ ì¡´ì¬ ì—¬ë¶€ë¥¼ ì²´í¬í–ˆë‹¤.

í•˜ì§€ë§Œ ì•„ì§ ê°œë°œë˜ì§€ ì•Šì€ ê²½ìš°ë¥¼ ì²´í¬í•˜ê¸° ìœ„í•´ì„œëŠ” ìœ„ ë°©ë²•ì´ ë§ì§€ ì•Šì„ ìˆ˜ë„ ìˆë‹¤. ì´ëŸ¬í•œ ê²½ìš°ì—ëŠ” ë¼ìš°íŒ…ì„ ë‹´ë‹¹í•˜ëŠ” react-router-domì„ ì¬ì •ì˜í•´ í…ŒìŠ¤íŠ¸ í•  ìˆ˜ ìˆë‹¤.

í˜„ì¬ í™”ë©´ì„ ì˜®ê¸°ëŠ” ì½”ë“œëŠ” ì•„ë˜ì™€ ê°™ë‹¤.

```tsx
import { useNavigate } from 'react-router-dom';

const navigate = useNavigate();

const handleStartQuiz = () => navigate('/quiz?idx=0');
```

ì—¬ê¸°ì„œ `useNavigate`ë¥¼ ì¬ì •ì˜ í•˜ë©´ ìœ„ì˜ ë°©ë²•ì´ ì•„ë‹Œ ë‹¤ë¥¸ ë°©ë²•ìœ¼ë¡œ í™”ë©´ì „í™˜ì„ ì²´í¬ í•  ìˆ˜ ìˆë‹¤.

- ì¬ì •ì˜ ì½”ë“œ

```tsx
const mockNavigate = jest.fn();
jest.mock('react-router-dom', () => ({
  ...jest.requireActual('react-router-dom'),
  useNavigate: () => jest.fn(),
}));
```

react-router-domì—ì„œ useNavigateë§Œ ì¬ì •ì˜ í•´ì¤€ë‹¤.

useNavigateë¥¼ ì¬ì •ì˜ í–ˆìœ¼ë‹ˆ `<MemoryRouter/>`ë¥¼ ì´ìš©í•˜ì§€ ì•Šê³  ë°”ë¡œ í…ŒìŠ¤íŠ¸ í•˜ë ¤ëŠ” ì»´í¬ë„ŒíŠ¸ë¥¼ ë Œë”ë§ í•´ì¤€ë‹¤.

- í…ŒìŠ¤íŠ¸ ì½”ë“œ

```tsx
it('í€´ì¦ˆ í’€ê¸° í´ë¦­ ì‹œ Quizë¡œ ì´ë™', () => {
  render(
    <QueryClientProvider client={queryClient}>
      <PageLayout>
        <Home />
      </PageLayout>
    </QueryClientProvider>
  );

  //When,Act - í€´ì¦ˆí’€ê¸° ë²„íŠ¼ì„ ëˆŒëŸ¬ í€´ì¦ˆ í˜ì´ì§€ë¡œ ë„˜ì–´ê°€ê¸°
  const countRadioBtn = screen.getByLabelText('5ê°œ');
  const levelRadioBtn = screen.getByLabelText('medium');
  const quizBtn = screen.getByText('í€´ì¦ˆí’€ê¸°');

  fireEvent.click(countRadioBtn);
  fireEvent.click(levelRadioBtn);
  fireEvent.click(quizBtn);

  //Then,Asser - í€´ì¦ˆí˜ì´ì§€
  expect(mockNavigate).toHaveBeenNthCalledWith(1, '/quiz?idx=0');
  // expect(screen.getByText("ì œì¶œí•˜ê¸°")).toBeInTheDocument();
});
```

<aside>
ğŸ’¡ **`toHaveBeenNthCalledWith`**
ëª¨ì˜ í•¨ìˆ˜ë¥¼ ì‚¬ìš©í•˜ëŠ” ê²½ìš° në²ˆì§¸ í˜¸ì¶œëœ ì¸ìˆ˜ê°€ ë¬´ì—‡ì¸ì§€ë¥¼ í…ŒìŠ¤íŠ¸í•˜ëŠ”ë° ì‚¬ìš©í•œë‹¤.
ìœ„ ì½”ë“œì—ì„œëŠ” navigate()ë¡œ ë„˜ì–´ê°€ëŠ” ê²½ë¡œê°€ ì˜ë„ì™€ ë§ëŠ”ì§€ íŒŒì•…í•œë‹¤.

</aside>
